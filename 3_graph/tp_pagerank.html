
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Algorithme PageRank de Google &#8212; Informatique en 2ème année de BCPST</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=6aa211a80e8e0ad13c9f98b61f85fb78546ea56f" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=4f5a1d078b6c00e5ef435388cc61494d2f099c28"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '3_graph/tp_pagerank';</script>
    <link rel="canonical" href="https://cpge-itc.github.io/bcpst2/3_graph/tp_pagerank.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="light">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        


    <div class="bd-sidebar__content">
        <div class="sidebar-start-items"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/cobra.webp" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Informatique en 2ème année de BCPST</h1>
      
    </a>
</div>
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../1_euler/euler.html">
   1. TP 1 : Résolution d’équation différentielle par la méthode d’Euler
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../2_probabilites/simulation.html">
   2. TP 2 : Simulation de variables aléatoires
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../4_population/population.html">
   3. TP 4 : Matrice de population
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../5_iris/iris.html">
   4. TP 5 : Statistiques et classification de fleurs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../6_sql/sql.html">
   5. TP 6 : SQL
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../7_dessin/tp7_dessin.html">
   6. TP 7 : Dessins, récursivité et fractales
  </a>
 </li>
</ul>

    </div>
</nav>
        </div>
        <div class="sidebar-end-items">
             <!-- To handle the deprecated key -->
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>


      </div>
      <main class="bd-main">
        
        
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>

        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__primary"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/cpge-itc/bcpst2/main?urlpath=tree/files/3_graph/tp_pagerank.ipynb" target="_blank"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://notebook.basthon.fr/?from=https://raw.githubusercontent.com/cpge-itc/bcpst2/main/files/3_graph/tp_pagerank.ipynb" target="_blank"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Basthon"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_basthon.svg">
  </span>
<span class="headerbtn__text-container">Basthon</span>
</a>

      </li>
      
      <li>
        
<button onclick="initThebeSBT()"
  class="headerbtn headerbtn-launch-thebe"
  data-toggle="tooltip"
data-placement="left"
title="Launch Thebe"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="headerbtn__text-container">Live Code</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/cpge-itc/bcpst2" target="_blank"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cpge-itc/bcpst2/issues/new?title=Issue%20on%20page%20%2F3_graph/tp_pagerank.html&body=Your%20issue%20content%20here." target="_blank"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cpge-itc/bcpst2/edit/main/files/3_graph/tp_pagerank.ipynb" target="_blank"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/3_graph/tp_pagerank.ipynb" target="_blank"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__secondary"
  class="headerbtn headerbtn-secondary"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>
            </div>
            
            
<!-- Table of contents that is only displayed when printing the page -->
<div id="jb-print-docs-body" class="onlyprint">
    <h1>Algorithme PageRank de Google</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#graphes-aleatoires">
   Graphes aléatoires
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pagerank">
   PageRank
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>

            <article class="bd-article" role="main">
              
  <section class="tex2jax_ignore mathjax_ignore" id="algorithme-pagerank-de-google">
<h1>Algorithme PageRank de Google<a class="headerlink" href="#algorithme-pagerank-de-google" title="Permalink to this headline">#</a></h1>
<blockquote>
<div><p>Pour savoir dans quel ordre afficher les résultats d’une recherche, Google utilise l’algorithme PageRank. Celui-ci consiste à faire une marche aléatoire sur le graphe du Web, dont les sommets sont les pages Internet et les arêtes sont les liens URL d’une page à une autre.</p>
</div></blockquote>
<center><img src=https://raw.githubusercontent.com/cpge-itc/itc1/main/files/5_graph/tp/tp3/pagerank.png width=70%></center>
<p>Si nécessaire, <a class="reference external" href="https://cpge-itc.github.io/itc1/5_graph/1_definition/1_graph">revoir ce cours (degré, voisin…)</a> et <a class="reference external" href="https://cpge-itc.github.io/itc1/5_graph/2_representation/2_representation">ce cours (matrice d’adjacence)</a> sur les graphes.</p>
<section id="graphes-aleatoires">
<h2>Graphes aléatoires<a class="headerlink" href="#graphes-aleatoires" title="Permalink to this headline">#</a></h2>
<p>Pour pouvoir tester notre algorithme, nous allons commencer par générer des graphes aléatoirement. Pour cela, on utilisera <code class="docutils literal notranslate"><span class="pre">random.random()</span></code> qui renvoie un réel choisi uniformément au hasard entre <span class="math notranslate nohighlight">\(0\)</span> et <span class="math notranslate nohighlight">\(1\)</span> :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.4086304440826104
</pre></div>
</div>
</div>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>Écrire une fonction <code class="docutils literal notranslate"><span class="pre">bernouilli</span></code> telle que, si <code class="docutils literal notranslate"><span class="pre">p</span></code> est un <code class="docutils literal notranslate"><span class="pre">float</span></code> entre <span class="math notranslate nohighlight">\(0\)</span> et <span class="math notranslate nohighlight">\(1\)</span>, <code class="docutils literal notranslate"><span class="pre">bernouilli(p)</span></code> renvoie <span class="math notranslate nohighlight">\(1\)</span> avec probabilité <code class="docutils literal notranslate"><span class="pre">p</span></code>, <span class="math notranslate nohighlight">\(0\)</span> sinon.<br />
Indice : On pourra commencer avec <code class="docutils literal notranslate"><span class="pre">p</span></code> = <span class="math notranslate nohighlight">\(\frac{1}{2}\)</span> (même probabilité d’obtenir un <span class="math notranslate nohighlight">\(1\)</span> et un <span class="math notranslate nohighlight">\(0\)</span>).</p>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>Écrire une fonction <code class="docutils literal notranslate"><span class="pre">random_graph(n,</span> <span class="pre">p)</span></code> qui renvoie un graphe orienté représenté par matrice d’adjacence, avec <code class="docutils literal notranslate"><span class="pre">n</span></code> sommets et une probabilité <code class="docutils literal notranslate"><span class="pre">p</span></code> d’avoir une arête entre deux sommets.</p>
</div>
<p>Pour afficher le graphe obtenu, on pourra utiliser la fonction suivante :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">draw_graph</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
    <span class="n">G_</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
            <span class="k">if</span> <span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">G_</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G_</span><span class="p">,</span> <span class="n">font_color</span> <span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">arrowsize</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>Écrire une fonction <code class="docutils literal notranslate"><span class="pre">number_edges</span></code> pour calculer le nombre d’arêtes d’un graphe orienté représenté par matrice d’adjacence.</p>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>En utilisant <code class="docutils literal notranslate"><span class="pre">number_edges</span></code> sur des graphes aléatoires, estimer le nombre moyen d’arêtes d’un graphe aléatoire obtenu par <code class="docutils literal notranslate"><span class="pre">random_graph(n,</span> <span class="pre">p)</span></code>, en fonction de <code class="docutils literal notranslate"><span class="pre">n</span></code> et de <code class="docutils literal notranslate"><span class="pre">p</span></code>.<br />
Retrouver ce résultat mathématiquement.</p>
</div>
</section>
<section id="pagerank">
<h2>PageRank<a class="headerlink" href="#pagerank" title="Permalink to this headline">#</a></h2>
<p>On considère un graphe où les sommets (numérotés à partir de <span class="math notranslate nohighlight">\(0\)</span>) représentent des pages Internet, et les arêtes représentent les liens URL d’une page à une autre. Pour classer les pages Web par ordre d’importance, l’algorithme PageRank effectue une marche aléatoire en se déplaçant à chaque fois vers un voisin pris au hasard. Plus la fréquence de passage sur un sommet est haute, plus la page Web correspondante se retrouvera en haut des résultats de recherche Google.</p>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>Écrire une fonction <code class="docutils literal notranslate"><span class="pre">step(G,</span> <span class="pre">u)</span></code> renvoyant un voisin de <code class="docutils literal notranslate"><span class="pre">u</span></code> choisi aléatoirement dans le graphe <code class="docutils literal notranslate"><span class="pre">G</span></code> représenté par matrice d’adjacence. On pourra utiliser <code class="docutils literal notranslate"><span class="pre">random.randrange(n)</span></code> qui renvoie un entier aléatoirement entre <span class="math notranslate nohighlight">\(0\)</span> et <span class="math notranslate nohighlight">\(n - 1\)</span>.<br />
<strong>Remarque</strong> : Pour tester <code class="docutils literal notranslate"><span class="pre">step</span></code>, il faut que <code class="docutils literal notranslate"><span class="pre">u</span></code> possède au moins un voisin… Essayer donc avec un <code class="docutils literal notranslate"><span class="pre">random_graph(n,</span> <span class="pre">p)</span></code> avec <code class="docutils literal notranslate"><span class="pre">p</span></code> au moins égal à <span class="math notranslate nohighlight">\(0.3\)</span>, ou essayez plusieurs fois.</p>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>Écrire une fonction <code class="docutils literal notranslate"><span class="pre">pagerank(G,</span> <span class="pre">k)</span></code> qui part du sommet <span class="math notranslate nohighlight">\(0\)</span> et effectue <code class="docutils literal notranslate"><span class="pre">k</span></code> déplacements au hasard (en utilisant <code class="docutils literal notranslate"><span class="pre">step</span></code>).<br />
Cette fonction doit renvoyer une liste <code class="docutils literal notranslate"><span class="pre">count</span></code> donnant le nombre de passages dans chaque sommet : <code class="docutils literal notranslate"><span class="pre">count[i]</span></code> doit être le nombre de passages sur le sommet <code class="docutils literal notranslate"><span class="pre">i</span></code>.</p>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>Écrire une fonction <code class="docutils literal notranslate"><span class="pre">add_index</span></code> telle que <code class="docutils literal notranslate"><span class="pre">add_index(L)</span></code> renvoie une liste <code class="docutils literal notranslate"><span class="pre">L2</span></code> de même taille que <code class="docutils literal notranslate"><span class="pre">L</span></code> telle que <code class="docutils literal notranslate"><span class="pre">L2[i]</span></code> contienne le couple <code class="docutils literal notranslate"><span class="pre">(L[i],</span> <span class="pre">i)</span></code>.</p>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>En déduire une fonction <code class="docutils literal notranslate"><span class="pre">rank</span></code> ayant en argument la liste <code class="docutils literal notranslate"><span class="pre">count</span></code> renvoyée par <code class="docutils literal notranslate"><span class="pre">pagerank</span></code> et qui renvoie la liste des sommets par valeur de <code class="docutils literal notranslate"><span class="pre">count</span></code> décroissante.<br />
Pour cela, on utilisera <code class="docutils literal notranslate"><span class="pre">L.sort(reverse=True)</span></code> qui trie une liste <code class="docutils literal notranslate"><span class="pre">L</span></code> en ordre décroissant, et le fait que l’on puisse trier une liste de couples (auquel cas la liste est triée suivant le premier élément de chaque couple)</p>
</div>
<div class="admonition-exercice admonition">
<p class="admonition-title">Exercice</p>
<p>Vérifier sur des graphes aléatoires que la liste renvoyée par <code class="docutils literal notranslate"><span class="pre">rank</span></code> a l’air correcte, en affichant le graphe avec la fonction suivante, où la taille d’un sommet est proportionnelle à son rang.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">draw_count</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rank</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
    <span class="n">G_</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
    <span class="n">G_</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="p">)))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">G_</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rank</span><span class="p">):</span>
        <span class="n">r</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">max_size</span> <span class="o">=</span> <span class="mi">5000</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_size</span> <span class="o">-</span> <span class="mi">500</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">rank</span><span class="p">))</span>
    <span class="n">node_sizes</span><span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">a</span> <span class="o">+</span> <span class="n">max_size</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">))]</span>
    <span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G_</span><span class="p">,</span> <span class="n">font_color</span> <span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="n">node_sizes</span><span class="p">,</span> <span class="n">arrowsize</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cpge-itc/bcpst2",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./3_graph"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

            </article>
            

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
            
          </div>
          
          

    <!-- Table of contents -->


<div class="bd-sidebar-secondary bd-toc show noprint">
    <div class="toc-item">
        <div class="tocsection onthispage">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav" aria-label="Page">
            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#graphes-aleatoires">
   Graphes aléatoires
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pagerank">
   PageRank
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>



        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            <p>
  
    By Quentin Fortier<br/>
  
      &copy; Copyright 2022.<br/>
</p>
          </div>
        </footer>
        

      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>

  </body>
</html>